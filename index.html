<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sketchfab Configurator</title>
    <link rel="stylesheet" href="./styles.css" />
  </head>

  <body>
    <div class="app">
      <iframe
        src=""
        id="api-frame"
        allowfullscreen
        mozallowfullscreen="true"
        webkitallowfullscreen="true"
        allow="vr"
        width="640"
        height="400"
      ></iframe>
      <div class="options"></div>
    </div>
  </body>

  <script
    type="text/javascript"
    src="https://static.sketchfab.com/api/sketchfab-viewer-1.3.2.js"
  ></script>
  <script
    type="text/javascript"
    src="./SketchfabConfigurator-1.0.6.js"
  ></script>
  <script type="text/javascript">
    var config = {
      model: "a86f7c2ecee8456e891ea222f04e3134",
      params: {
        camera: 0,
        preload: 1,
        ui_controls: 0,
        ui_infos: 0,
        ui_watermark: 0,
      },
      config: [
        {
          name: "Texture",
          material: "Metal_Corrugated_Shiny",
          channels: ["AlbedoPBR"],
          type: "texture",
          options: [
            {
              name: "",
              url: "https://i.imgur.com/hVQYxfV.jpg",
              price: 600,
            },
            {
              name: "",
              url: "https://i.imgur.com/zIqQ1DD.jpg",
              price: 900,
            },
            {
              name: "",
              url: "https://i.imgur.com/dh0kjlT.jpg",
              price: 1200,
            },
          ],
          default: 0,
        },
        {
          name: "Select",
          type: "select",
          options: [
            {
              name: "FUSION ROOF",
              selector: '[instance="1100"]',
              price: 1200,
            },
            {
              name: "SHED MODERNA",
              selector: '[instance="983"]',
              price: 1800,
            },
            {
              name: "ROOF MODERNA",
              selector: '[instance="1056"]',
              price: 2200,
            },
          ],
          default: 0,
        },
      ],
    };

    var iframeEl = document.getElementById("api-frame");
    var optionsEl = document.querySelector(".options");
    var configurator = new SketchfabConfigurator.Configurator(
      iframeEl,
      optionsEl,
      config,
    );

    function sendSelectionsToParent() {
      var selections = configurator.getSelections();
      window.parent.postMessage(
        { type: "selectionsData", selections: selections },
        "*",
      );
    }

    configurator.on("selectionChange", sendSelectionsToParent);
  </script>
</html>
